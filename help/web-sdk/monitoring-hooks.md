---
title: Monitoring hooks for Adobe Experience Platform Web SDK
description: Learn how to use the monitoring hooks provided by the Adobe Experience Platform Web SDK to debug your implementation and capture Web SDK logs.
---

# Monitoring hooks for Experience Platform Web SDK

The Adobe Experience Platform Web SDK includes monitoring hooks which you can use to monitor various system events. These tools are useful for developing your own debugging tools and to capture Web SDK logs.


The Web SDK looks for an array of objects in a global variable called `__alloyMonitors`.

To capture all Web SDK events, you must define your monitoring hooks before the Web SDK code is loaded on your page.

Each monitoring method captures a Web SDK event.

Following is an example page with a monitor defined:


```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script>
    window.__alloyMonitors = window.__alloyMonitors || [];
    window.__alloyMonitors.push({
      onInstanceCreated(data) {
        // data.instanceName
        // data.instance
      },
      onInstanceConfigured(data) {
        // data.instanceName
        // data.config
      },
      onBeforeCommand(data) {
        // data.instanceName
        // data.commandName
        // data.options
      },
      // Added in version 2.4.0
      onCommandResolved(data) {
        // data.instanceName
        // data.commandName
        // data.options
        // data.result
      },
      // Added in version 2.4.0
      onCommandRejected(data) {
        // data.instanceName
        // data.commandName
        // data.options
        // data.error
      },
      onBeforeNetworkRequest(data) {
        // data.instanceName
        // data.requestId
        // data.url
        // data.payload
      },
      onNetworkResponse(data) {
        // data.instanceName
        // data.requestId
        // data.url
        // data.payload
        // data.body
        // data.parsedBody
        // data.status
        // data.retriesAttempted
      },
      onNetworkError(data) {
        // data.instanceName
        // data.requestId
        // data.url
        // data.payload
        // data.error
      },
      onBeforeLog(data) {
        // data.instanceName
        // data.componentName
        // data.level
        // data.arguments
      }
      onContentRendering(data) {
        // data.instanceName
        // data.componentName
        // data.payload
        // data.status
      },
      onContentHiding(data) {
        // data.instanceName
        // data.componentName
        // data.status
      }
    });
  </script>
  <script>
      !function(n,o){o.forEach(function(o){n[o]||((n.__alloyNS=n.__alloyNS||
      []).push(o),n[o]=function(){var u=arguments;return new Promise(
      function(i,l){n[o].q.push([i,l,u])})},n[o].q=[])})}
      (window,["alloy"]);
    </script>
    <script src="alloy.js" async></script>
</head>
<body>
  <h1>Monitor Test</h1>
</body>
</html>
```

|Parameter | Description |  
|---------|----------|
| `data.instanceName` | The name of the global variable where the Web SDK instance is stored. | 
| `data.instance` | The instance function used to call Web SDK commands. |
| `data.config` | The configuration you used for your Web SDK instance. These are the options passed to the [`configure`](commands/configure/overview.md) command with all the default values added. | 
| `data.commandName` | The name of the executed Web SDK command. |
| `data.options` | The options passed to the Web SDK command. |
| `data.result` | The result of the Web SDK command. |
| `data.requestId`  | The `requestId` generated by Web SDK to enable debugging. |
| `data.url` | The requested URL. |
| `data.payload` | The payload object that will be converted to JSON format and sent in the body of the request, through a `POST` method. |
| `data.body`  | The response body in string format. |
| `data.parsedBody` | An object containing the parsed response body. If an error occurs while parsing the response body, this parameter is undefined. |
| `data.status` | The response code in integer format. |
| `data.retriesAttempted` | The number of retries attempted when sending the request. Zero means the request was successful on the first try. |
| `data.error`  | The error message returned from the browser's network call (`fetch` in most cases). |
| `data.componentName` | The name of the component that generated the log message. |
| `data.level` | The logging level. Supported levels: `log`, `info`, `warn`, `error`. |
| `data.arguments` | The arguments of the log message. |
| `data.status` | The `personalization` component notifies the status of rendering. Supported values: `rendering-started`, `no-offers`, `rendering-failed`, `rendering-succeeded`, `rendering-redirect`. |


## How to specify monitoring hooks when using the NPM package {#specify-monitoris-npm}

If you are using the Web SDK through the [NPM package](install/npm.md), you can specify monitoring hooks in the `createInstasnce` function, as shown below.

```js
var monitor = {
  onBeforeCommand(data) {
    console.log(data);
  },
  ...
};
var alloyLibrary = require("@adobe/alloy");
var alloy = alloyLibrary.createInstance({ name: "alloy", monitors: [monitor] });
alloy("config", { ... });
alloy("sendEvent", { ... });
```

